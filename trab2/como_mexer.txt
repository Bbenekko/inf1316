Para rodar o seu **KernelSim** e iniciar a simula√ß√£o completa no Fedora Linux, voc√™ precisa seguir v√°rios passos. Isso envolve: **compilar** todos os componentes (KernelSim, SFSS\_server, $\text{A}_x$, interControllerSim2) e garantir que a estrutura de arquivos e diret√≥rios (`SFSS-root-dir`) esteja configurada.

Aqui est√° o guia passo a passo:

## 1\. ‚öôÔ∏è Compila√ß√£o dos Componentes

Voc√™ deve compilar todos os arquivos `.c` que comp√µem a simula√ß√£o. Como voc√™ tem muitos arquivos (KernelSim, SFSS\_server, interControllerSim2, $\text{A}_x$ e seus auxiliares), a melhor forma √© usar um script ou o `gcc` diretamente.

Assumindo que todos os arquivos auxiliares (`fila.c`, `semaforo.c`, `trabalho.h`, etc.) est√£o no mesmo diret√≥rio:

```bash
# 1. Compilar os programas de aplica√ß√£o (Ax)
gcc -o ax1 ax1.c -lrt -lpthread -lm -Wall
gcc -o ax2 ax2.c -lrt -lpthread -lm -Wall
gcc -o ax3 ax3.c -lrt -lpthread -lm -Wall
gcc -o ax4 ax4.c -lrt -lpthread -lm -Wall
gcc -o ax5 ax5.c -lrt -lpthread -lm -Wall

# 2. Compilar os m√≥dulos auxiliares (fila e semaforo)
gcc -c fila.c
gcc -c semaforo.c

# 3. Compilar o InterControllerSim2
gcc -o interControllerSim2 interControllerSim2.c -Wall

# 4. Compilar o SFSS_server (incluindo as fun√ß√µes de arquivo)
gcc -o SFSS_server SFSS_server.c SFSS_functions.c fila.o semaforo.o -Wall

# 5. Compilar o KernelSim (O Core do SO)
gcc -o kernelSim2 kernelSim2.c fila.o semaforo.o -Wall
```

**Nota sobre o `gcc`:** Voc√™ deve incluir todos os arquivos `.o` (como `fila.o` e `semaforo.o`) ao compilar os execut√°veis principais (`kernelSim2` e `SFSS_server`) se eles dependem desses m√≥dulos.

-----

## 2\. üìÇ Configura√ß√£o do Diret√≥rio Raiz (SFSS-root-dir)

[cite_start]O servidor SFSS deve ser executado a partir de um diret√≥rio que servir√° como a raiz (`/`) do seu sistema de arquivos SFP[cite: 108]. Seu c√≥digo define isso como `./SFSS-root-dir`.

Voc√™ precisa **criar esta pasta** e os diret√≥rios *home* dos usu√°rios ($\text{A0}$ a $\text{A5}$) antes de executar o servidor.

```bash
# Criar o diret√≥rio raiz do sistema de arquivos SFP
mkdir SFSS-root-dir

# Criar os diret√≥rios home de cada processo
mkdir SFSS-root-dir/A0
mkdir SFSS-root-dir/A1
mkdir SFSS-root-dir/A2
mkdir SFSS-root-dir/A3
mkdir SFSS-root-dir/A4
mkdir SFSS-root-dir/A5

# [cite_start]Nota: O diret√≥rio A0 √© o home especial de compartilhamento[cite: 36].
```

-----

## 3\. üöÄ Ordem de Execu√ß√£o (Lan√ßando o Sistema)

O sistema deve ser iniciado na seguinte ordem:

### Passo 3.1: Iniciar o Servidor SFSS (O Sistema de Arquivos)

O servidor deve estar rodando primeiro, escutando a porta que o KernelSim usar√° para enviar as requisi√ß√µes (por exemplo, `12345`).

```bash
./SFSS_server 12345 & 
# O '&' (ampersand) coloca o servidor em background para que voc√™ possa usar o terminal novamente.
```

### Passo 3.2: Iniciar o KernelSim (O SO Simulador)

O KernelSim iniciar√° o escalonamento, criar√° os processos $\text{A}_x$ e o `interControllerSim2`, e come√ßar√° a escutar por requisi√ß√µes SFP e interrup√ß√µes.

```bash
./kernelSim2
```

O KernelSim ir√°:

1.  Criar o sem√°foro e a *shared memory*.
2.  Criar os processos $\text{A}_x$ (que iniciar√£o parados com `SIGSTOP`).
3.  Criar a FIFO.
4.  Iniciar o *InterControllerSim2* (que enviar√° IRQ0, IRQ1, IRQ2 pela FIFO).
5.  Entrar no *loop* `while(1)` para gerenciar o sistema.

A partir da√≠, o KernelSim gerencia as *system calls* dos $\text{A}_x$ enviando pacotes UDP para o `SFSS_server` e controlando a execu√ß√£o via sinais (`SIGSTOP`/`SIGCONT`) e interrup√ß√µes.


CASO DE ERRO:

ipcs -m

ipcrm -m 32768